# ConvoDigestBot

## Структура проекта

```
ConvoDigestBot/
├── src/
│   ├── config/
│   │   ├── config.py
│   │   └── schemas.py
│   ├── llm/
│   │   ├── client.py
│   │   └── prompts.py
│   ├── scheduler/
│   │   └── scheduler.py
│   └── telegram/
│       ├── bot.py
│       └── telethon.py
├── Dockerfile
├── docker-compose.yml
├── requirements.txt
├── README.md
├── task.md
├── main.py
```

- Исходные Python-файлы разложены по папкам внутри `src/`:
  - `llm/` — генерация отчёта через LLM, промпты
  - `telegram/` — работа с Telegram: загрузка истории (Telethon), отправка отчёта (aiogram)
  - `scheduler/` — планировщик задач и пайплайн
  - `config/` — конфигурация и схемы
- Точка входа — файл `main.py` в корне.
- Конфигурационные и документационные файлы — в корне.

## Запуск через Docker

1. Скопируйте `.env.example` в `.env` и заполните параметры.
2. Соберите и запустите контейнер:
   ```sh
   docker-compose up --build
   ```
   По умолчанию запустится планировщик (еженедельный отчёт).

## Локальный запуск (без Docker)
1. Установите зависимости:
   ```sh
   pip install -r requirements.txt
   ```
2. Запустите:
   ```sh
   python main.py
   ```
   Это запустит планировщик, который сразу выполнит пайплайн и далее будет работать по расписанию.

## Возможности

- **Автоматический сбор сообщений из Telegram-чата за неделю**
- **Генерация отчёта через LLM (OpenAI/Ollama)**
- **Отправка отчёта в Telegram-чат**
- **Планировщик (APScheduler) для еженедельного запуска**

> **Внимание:**  
> На данный момент нет CLI-режимов для ручного запуска только генерации отчёта или только отправки.  
> Все действия происходят автоматически через планировщик.

## Конфиг
- Все параметры берутся из `.env`.

## Технологии
- Telethon, aiogram, APScheduler, Ollama/OpenAI 